{% extends 'app_synes/base.html' %}
{% load static %}
{% block title %}CadêURacha - Todos{% endblock %}
{% block content %}

<body>
  


  
    <div class="text-center mb-3 w-100">
      <h2><b>Todas os Jogos e Quadras:</b></h2>
    </div>
    <div class="my-5"></div>
  <!-- Seção Quadras -->
  <div id="quadras-section">
    <h3 class="w-100 text-center">Quadras:</h3>
    <div id="Agrupador" class="d-flex align-items-center w-85">
      <button class="no-style">
        <i class='bx bx-chevron-left arrow'></i>
      </button>

      <div class="container shadow rounded-5 cream">
        <div class="row d-flex flex-nowrap overflow-auto w-100">
          {% for quadra in quadras %}
            <a href="{% url 'detalhes_quadra' quadra.id %}">
              <div class="card border-0 text-bg-dark ratio ratio-1x1">
                {% if quadra.imagem %}
                  <img src="{{ quadra.imagem.url }}" class="card-img" alt="Imagem de {{ quadra.nome }}">
                {% else %}
                  <img src="{% static 'app_synes/images/quadra.jpeg' %}" class="card-img" alt="Imagem de quadra">
                {% endif %}
                <div class="card-img-overlay">
                  <i class='bx bxs-star d-flex align-items-center'>
                    <span id="Media">{{ quadra.rating|default:"N/A" }}</span>
                  </i>
                  <div class="texts quadra">
                    <p class="card-title text-center mb-flex text-truncate"><b>{{ quadra.nome }}</b></p>
                    <p class="card-title text-center">{{ quadra.bairro }}</p>
                  </div>
                </div>
              </div>
            </a>
          {% empty %}
            <p class="no-data">Nenhuma quadra cadastrada.</p>
          {% endfor %}
        </div>
      </div>

      <button class="no-style">
        <i class='bx bx-chevron-right arrow'></i>
      </button>
    </div>
  </div>

  <!-- Adiciona um espaço entre as seções -->
  <div class="my-5"></div>

  <!-- Seção Jogos -->
  <div id="jogos-section">
    <h3 class="w-100 text-center">Jogos:</h3>
    <div id="Agrupador" class="d-flex align-items-center w-85">
      <button class="no-style">
        <i class='bx bx-chevron-left arrow'></i>
      </button>

      <div class="container shadow rounded-5 cream">
        <div class="row d-flex flex-nowrap overflow-auto w-100">
          {% for jogo in jogos %}
            <a href="{% url 'detalhes_jogo' jogo.id %}">
              <div class="card border-0 text-bg-dark ratio ratio-1x1">
                {% if jogo.imagem %}
                  <img src="{{ jogo.imagem.url }}" class="card-img" alt="Imagem de {{ jogo.titulo }}">
                {% else %}
                  <img src="{% static 'app_synes/images/space.jpg' %}" class="card-img" alt="Imagem de jogo">
                {% endif %}
                <div class="card-img-overlay">
                  <i class='bx bxs-basketball'></i>
                  <div class="texts">
                    <h5 class="card-title text-center">
                      <b>{{ jogo.data|date:"d/m/Y" }}</b>
                    </h5>
                    <p class="card-title text-center">
                      <b class="jogo-horario">{{ jogo.horario }}</b>
                    </p>
                  </div>
                </div>
              </div>
            </a>
          {% empty %}
            <p class="no-data">Nenhum jogo cadastrado.</p>
          {% endfor %}
        </div>
      </div>

      <button class="no-style">
        <i class='bx bx-chevron-right arrow'></i>
      </button>
    </div>
  </div>

</body>

<style>
  :root {
      --darker-lilac: #34327B;
      --dark-purple: #1C1829;
      --lilac: #9F84F9;
      --true-orange: #EB7A42;
      --cream: #FEFAEE;
      --yellow: #E5C03E;
      --input-color: rgba(44, 109, 165, 0.1);
  }


  #Agrupador{
    width: 100% !important;
    margin:0;
    padding:0;
  }

  .row{
    padding: 0;
    margin: 0;
  }

  .translate {
      transform: translateX(-1rem);
  }

  #Agrupador .container {
      z-index: 2;
  }

  .w-85 {
      width: 85% !important;
  }

  h2 b span {
      color: var(--true-orange);
  }

  .ml-15 {
      margin-left: 15%;
  }

  .container .row {
      scrollbar-width: none;
      -ms-overflow-style: none;
  }

  .container .row::-webkit-scrollbar {
      display: none;
  }

  .card-img-overlay .texts {
      transform: translateY(3.5rem);
      max-height: 100px; /* Ajuste conforme necessário */
      overflow-y: auto;
      scrollbar-width: none; /* Firefox */
  }

  .card-img-overlay .texts::-webkit-scrollbar {
      display: none; /* Chrome, Safari, Opera */
  }

  .row a {
      transition: all .8s ease;
      margin: 0 !important;
      padding: 0 !important;
      width: fit-content;
  }

  .row a:hover {
      opacity: 80%;
  }

  .card-img-overlay i {
      position: absolute;
      font-size: 25px;
      top: 6;
      right: 0;
      transform: translateX(-.6rem);
  }

  i span {
      font-family: "Syne", sans-serif !important;
      transform: translateY(-.2rem) !important;
  }

  .card img {
      border-radius: 20px !important;
      object-fit: cover;
      filter: blur(1px) brightness(0.7) saturate(0.8) contrast(0.5);
      width: 100%;
      height: 100%;
      mix-blend-mode: overlay;
  }

  .cream {
      padding: 1.5rem 3rem;
      background-color: var(--cream);
  }

  .card {
      border-radius: 20px !important;
      width: 160px !important;
      height: 160px !important;
      min-width: 160px;
      min-height: 160px;
      background: linear-gradient(180deg, #9f84f9BB, #fdc4a89f);
      cursor: pointer;
  }

  .no-style {
      background: transparent;
      border: 0;
  }

  .arrow {
      font-size: 70px;
      color: var(--true-orange);
      cursor: pointer;
  }

  .row {
      gap: 41px !important;
      scroll-behavior: smooth;
  }

  @media (max-width:1200px) {
      .ml-15 {
          margin: 0;
          text-align: center;
      }
  }

  @media (max-width: 500px) {
      h2 {
          font-size: 22px !important;
      }

      .card-img-overlay i {
          font-size: 18px;
      }

      i span {
          font-size: 16px;
          transform: translateY(-.05rem) !important;
      }

      .card-img-overlay .texts {
          transform: translateY(3rem);
      }

      .row {
          gap: 10px;
      }

      .card h5 {
          font-size: 13px !important;
      }

      .card p {
          font-size: 10px !important;
          transform: translateY(-.4rem);
      }

      .container {
          width: 60% !important;
          padding: 2rem !important;
      }

      .card {
          width: 120px !important;
          height: 120px !important;
          min-width: 120px;
          min-height: 120px;
      }

      .card img {
          filter: blur(0.5px) brightness(0.7) saturate(0.8) contrast(0.5);
      }

      #Agrupador {
          width: 100% !important;
      }
  }

  /* Adicione essa regra para impedir a quebra de linha da data */
  .card-img-overlay .texts h5,
  .card-img-overlay .texts h5 b {
      white-space: nowrap;
  }
</style>

<script>
// Para cada elemento de horário, calcula o horário final 2 horas à frente
document.querySelectorAll('.jogo-horario').forEach(function(elem) {
    let start = elem.textContent.trim();
    // Pressupõe o formato "HH:MM" (ex.: "20:00")
    let parts = start.split(':');
    if (parts.length === 2) {
        let hours = parseInt(parts[0], 10);
        let minutes = parseInt(parts[1], 10);
        // Calcula o horário final adicionando 2 horas
        let endHours = (hours + 2) % 24;
        // Função para garantir 2 dígitos
        let pad = num => (num < 10 ? '0' + num : num);
        elem.textContent = pad(hours) + ':' + pad(minutes) + ' - ' + pad(endHours) + ':' + pad(minutes);
    }
});
</script>

{% endblock %}